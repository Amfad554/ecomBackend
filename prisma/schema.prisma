generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// --- 1. USER & AUTHENTICATION ---
model User {
  id         String   @id @default(cuid())
  name       String?
  email      String   @unique
  password   String // Hashed password
  role       Role     @default(CLIENT)
  image      String?
  isVerified Boolean  @default(false) // <--- Make sure this line exists!
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  // Relationships
  inquiries Inquiry[] // Tracks inquiries made by this specific user
}

enum Role {
  ADMIN // Can manage equipment and view all inquiries
  STAFF // Can update equipment status
  CLIENT // Can view catalogue and submit inquiries
}

// --- 2. EQUIPMENT CATALOGUE ---
model Equipment {
  id             String   @id @default(cuid())
  name           String
  category       String // e.g., "Excavators", "Cranes"
  brand          String // e.g., "Caterpillar"
  region         String // e.g., "Lagos Mainland"
  description    String?  @db.Text
  imageUrl       String?
  dailyRate      Decimal?
  isAvailable    Boolean  @default(true)
  specifications Json? // For technical details like horsepower, weight, etc.
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

// --- 3. INQUIRIES & LEADS ---
model Inquiry {
  id           String @id @default(cuid())
  fullName     String
  email        String
  service      String // "Heavy Machinery Procurement", etc.
  requirements String @db.Text
  status       Status @default(PENDING)

  // Link to User (Optional: allows guest inquiries or logged-in inquiries)
  userId String?
  user   User?   @relation(fields: [userId], references: [id])

  createdAt DateTime @default(now())
}

enum Status {
  PENDING
  PROCESSING
  COMPLETED
  CANCELLED
}

// --- 4. FEATURED PROJECTS ---
model Project {
  id         String   @id @default(cuid())
  title      String
  tag        String // e.g., "Oil & Gas"
  result     String // e.g., "30% Efficiency Boost"
  imageUrl   String?
  isFeatured Boolean  @default(false)
  createdAt  DateTime @default(now())
}

// --- 5. STAFF MEMBERS ---
model Staff {
  id        String   @id @default(cuid())
  name      String
  role      String
  specialty String
  imageUrl  String?
  createdAt DateTime @default(now())
}
